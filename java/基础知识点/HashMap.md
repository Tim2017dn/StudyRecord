#  HashMap

## 需要回答的问题

- HashMap的底层数据结构？
- HashMap的存取原理？
- Java7和Java8的区别？
- 为啥会线程不安全？
- 有什么线程安全的类代替么?
- 默认初始化大小是多少？为啥是这么多？为啥大小都是2的幂？
- HashMap的扩容方式？负载因子是多少？为什是这么多？
- HashMap的主要参数都有哪些？
- HashMap是怎么处理hash碰撞的？
- hash的计算规则？

#### 底层数据结构

```
jdk1.8中， 数组+链表+红黑树  数组是node，变成红黑树就是TreeNode
```



#### 存取原理

```
存：put() 对key 进行一次hash计算
	第一次put 会resize()
	找到对应的位置
	为null 直接newNode 插入
	不为null
	三种情况
	1、与头结点 hash值相等 key值相等 直接覆盖
	2、发现是TreeNode 按TreeNode插入
	3、当作链表插入 node.next 依次比较 如果有相同的key和hash也是覆盖，插入新节点会查看数量是否到了 转化树的阈值 8
	
```



```
取：get()  getNode()
	 根据hash值
	 取到对应hash位置
	 取头结点
	 是，就返回
	 不是，看后继结点
	 同样，对于后继结点
	 两者情况：
	 	1、是TreeNode 有getTreeNode
	 	2、链表就依此遍历
```



### Java7和Java8的区别？

```

```



### 为啥会线程不安全？

```
多线程同时put，会存在前面刚存的被后面线程覆盖，在key相同的情况下
```



### 有什么线程安全的类代替么?

```
HashTable
concurrentHashMap
```



默认初始化大小是多少？为啥是这么多？为啥大小都是2的幂？

HashMap的扩容方式？负载因子是多少？为什是这么多？

HashMap的主要参数都有哪些？

```
默认的初始化大小是16 ，是2的幂便于后面的位操作
负载因子 0.75
主要参数：
	默认初始化大小
	最大容量 2的20次方
	负载因子
	转为树的阈值
	从树转为链表的阈值
```



```
扩容：resize()


```



### hash的计算规则？

```
key的hashcode

```



