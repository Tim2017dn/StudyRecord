# 索引



## 索引是一种数据访问的方式



## B-Tree、B+Tree、聚簇索引、回表、index（A,B,C）

b树和b+树的区别

聚簇索引：主键索引、IOT

非聚簇索引是否需要回表？

比如，index（A,B,C）只要A，B，c 或者A,B或者A，那就不需要回表

​			如果还需要其他值，那就需要回表



## 索引一定提高查询效率吗

不一定，看情况

大部分情况提高

少部分情况不提高：1、比如基本表非常小，遍历代价地

​								2、基本表大，当满足查询条件的基数比较多，可能需要不断回表，







## B+Tree和Hash索引的差异，各自适用于怎样的查询



B+Tree 适合：等值查询、范围查询、前缀查询

Hash适合：等值查询



# SQL

## SQL执行的顺序，关系代数的结果相同的等价变化

​	查询优化器

## 优化的核心逻辑，让中间结果集最小（过滤条件）

选择子查询



## 好的程序员编码的适合考虑用户的感受

返回有限条、分页、增加条件、空结果集的预先处理

增加条件：比如缺省条件 为最近三个月

空结果集：先找到空结果集，直接放回

## 日期和字符串的SQL





# 事务

脏读 不可重复读  幻读

mvcc 一致性读 如何实现



# 分区和树状结构

## 分区的方式、手段

## 选择分区键的原则和逻辑

## 树状结构

	### 三种实现树状结构的数据库表的设计



# 并发和大数据量

## 负载增加未必是造成性能的原因，它只不过使得性能问题暴露出来

## 并发和大数据量处理的基本逻辑

## 并发读取和并发修改

## 不同操作对数据量增加的影响差异

## 如何处理大数据量





## 突然发现一条SQL语句执行的很慢，你猜测什么原因，你怎么做

1 大多数情况正常，偶尔慢

原因： 正常现象，有可能就是物理上交换缓存，或者偶尔被慢查询阻塞

2  一直很慢

原因：分析查询计划，

​		增加索引，调整sql，实在不行分表、分库，读写分离

3 之前正常，最近变慢

​	并发数据量变大



## 回表查询和覆盖索引



> https://juejin.im/post/5e412378f265da5709701282#heading-8



### 哪些场景适合使用覆盖索引来优化sql

- 全表count查询优化

- 列查询回表优化

  需要查询其他列，从而需要回表，可以考虑建立组合索引

- 分页查询



##  查询优化器

目前mysql采用 基于成本的查询优化器（cbo）

优化器会根据对关系表达式进行优化

产生多个执行计划

CBO会根据统计信息和代价模型 计算每个执行计划的cost，从中挑选cost最小的的执行计划

